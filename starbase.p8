pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- deep space one
-- by hugh :)

function _init()
	tsz=8 -- tile size
	cx=7 cy=7 --player reticle
	nodes={}
	
	node.create(8,8,true)
end

function _update()
 if btnp(➡️) then cx+=1 end
 if btnp(⬅️) then cx-=1 end
	if btnp(⬇️) then cy+=1 end
	if btnp(⬆️) then cy-=1 end
 if btnp(❎) then
  node.create(cx,cy)
 end
 for n in all(nodes) do
 	node.update(n)
 end
end

function _draw()
 cls(1)
	rect(cx*tsz,cy*tsz,
						cx*tsz+(tsz+1),cy*tsz+(tsz+1),7)
	for n in all(nodes) do
		node.draw(n)
	end
end

-->8
-- node

node={}

node.create=function(_x,_y,_p)
 if _p==nil then _p=false end
	local n={x=_x,y=_y,sp=1,pwr=_p}
	add(nodes,n)
end

node.update=function(n)
	if n.pwr then n.sp=2 else n.sp=1 end
end

node.draw=function(n)
 spr(n.sp, (n.x*tsz)+1, (n.y*tsz)+1)
end

--todo: nodes as lookup table?
--don't want to always iterate

__gfx__
0000000000066000000aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000066000000aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000666600006aa60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000666aa666aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000666aa666aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000666600006aa60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000066000000aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000066000000aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
